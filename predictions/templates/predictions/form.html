{% extends 'base.html' %}
{% block content %}
<h2>Chronic Disease Prediction</h2>
<form id="predict-form" method="post" action="/predictions/api/predict/">{% csrf_token %}
  <div class="grid">
    {% for f in feature_names %}
      <label>{{ f }}<input name="{{ f }}" type="number" step="any" required></label>
    {% endfor %}
  </div>
  <button type="submit">Predict</button>
</form>
<pre id="result"></pre>
<script>
const form = document.getElementById('predict-form');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const formData = new FormData(form);
  const resp = await fetch(form.action, {method: 'POST', body: formData, headers: {'X-Requested-With': 'fetch'}});
  const data = await resp.json();
  document.getElementById('result').textContent = JSON.stringify(data, null, 2);
});
</script>
{% endblock %}